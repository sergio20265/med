
<!-- ===== МОБИЛЬНОЕ МЕНЮ ===== -->
<div *ngIf="visible" class="vs-menu-wrapper vs-body-visible">
  <div class="vs-menu-area text-center">
    <button class="vs-menu-toggle" (click)="close_menu()"><i class="fal fa-times"></i></button>
    <div class="mobile-logo">
      <a routerLink="/"><img alt="Стационар Новая медицина" src="assets/img/stacionar-main/new_logo.png" style="max-height:50px;"></a>
    </div>
    <div class="vs-mobile-menu">
      <ul>
        <li *ngFor="let item of menuItems"
            [class.vs-item-has-children]="item.children"
            [class.vs-active]="item.children && isExpanded(item.label)">
          <!-- Пункт с подменю: клик раскрывает/сворачивает -->
          <a *ngIf="item.children; else simpleLink" (click)="toggleSubmenu(item.label)">{{item.label}}</a>
          <ng-template #simpleLink>
            <a (click)="close_menu()" [routerLink]="item.route">{{item.label}}</a>
          </ng-template>
          <!-- Подменю — только когда раскрыто -->
          <ul class="sub-menu" *ngIf="item.children && isExpanded(item.label)">
            <li *ngFor="let child of item.children">
              <a (click)="close_menu()" [routerLink]="child.route">{{child.label}}</a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</div>

<!-- ===== POPUP: ПЕРЕЗВОНИТЕ МНЕ ===== -->
<div *ngIf="showCallback" class="hdr-popup-overlay" (click)="closeCallbackOverlay($event)">
  <div class="hdr-popup" role="dialog">
    <button class="hdr-popup-close" (click)="toggleCallback()" aria-label="Закрыть"><i class="fal fa-times"></i></button>
    <h4 class="hdr-popup-title">Перезвоните мне</h4>
    <p class="hdr-popup-sub">Оставьте номер — врач перезвонит в течение 5 минут</p>
    <input type="text" placeholder="Ваше имя" class="form-control hdr-popup-input">
    <input type="tel" placeholder="+7 (___) ___-__-__" class="form-control hdr-popup-input">
    <button class="vs-btn style1 w-100">Отправить</button>
    <p class="hdr-popup-agree">Нажимая кнопку, вы соглашаетесь с <a routerLink="/privacy">политикой конфиденциальности</a></p>
  </div>
</div>

<!-- ===== ШАПКА ===== -->
<header class="site-header-new">

  <!-- ── ВЕРХНЯЯ ПОЛОСА: Логотип | Адрес | График | Телефон | Кнопка ── -->
  <div class="hdr-info-bar">
    <div class="container">
      <div class="hdr-info-inner">

        <!-- Логотип -->
        <a routerLink="/" class="hdr-logo">
          <img src="assets/img/stacionar-main/logo.png" alt="Новая Медицина — Сеть медицинских центров">
        </a>

        <!-- Адрес -->
        <div class="hdr-info-item">
          <i class="fas fa-map-marker-alt hdr-info-icon"></i>
          <div>
            <span class="hdr-info-label">Адрес стационара</span>
            <span class="hdr-info-value">Владимирская область, пос. Городищи,<br class="d-none d-xl-inline">ул. Больничный проезд, д. 1</span>
          </div>
        </div>

        <!-- График -->
        <div class="hdr-info-item">
          <i class="fas fa-clock hdr-info-icon"></i>
          <div>
            <span class="hdr-info-label">График работы</span>
            <span class="hdr-info-value">Круглосуточно</span>
          </div>
        </div>

        <!-- Телефон + кнопка -->
        <div class="hdr-phone-group">
          <a href="tel:+79300332222" class="hdr-phone-link">
            <i class="fas fa-phone-alt"></i>
            +7 (930) 033-22-22
          </a>
          <button class="hdr-callback-btn" (click)="toggleCallback()">
            Перезвоните мне
          </button>
        </div>

        <!-- Бургер (мобильный) -->
        <button class="vs-menu-toggle hdr-burger d-lg-none" (click)="close_menu()">
          <i class="fas fa-bars"></i>
        </button>

      </div>
    </div>
  </div>

  <!-- ── ПОДПОЛОСА: Три кнопки-действия ── -->
  <div class="hdr-actions-bar">
    <div class="container">
      <div class="hdr-actions-inner">
        <a routerLink="/license" class="hdr-action-btn">
          <i class="fas fa-file-medical"></i>
          Медицинская лицензия Л041-01134-33_00340367
        </a>
        <a href="mailto:nmpansion@yandex.ru" class="hdr-action-btn">
          <i class="fas fa-paper-plane"></i>
          Отправить эпикриз
        </a>
        <a href="https://t.me/+dnM4EbcdmwM3ZjAy" target="_blank" rel="noopener noreferrer" class="hdr-action-btn">
          <i class="fab fa-telegram-plane"></i>
          Написать в Telegram
        </a>
      </div>
    </div>
  </div>

  <!-- ── НАВИГАЦИЯ ── -->
  <div class="hdr-nav-bar sticky-wrap">
    <div class="sticky-active">
      <div class="container">

        <!-- Десктоп -->
        <nav class="hdr-nav-desktop d-none d-lg-flex">
          <ul class="hdr-nav-list">
            <li *ngFor="let item of menuItems" [class.has-children]="item.children" class="hdr-nav-item">
              <a [routerLink]="item.route" class="hdr-nav-link">
                {{item.label}}
                <i *ngIf="item.children" class="fas fa-chevron-down hdr-nav-arrow"></i>
              </a>
              <ul class="hdr-sub-menu" *ngIf="item.children">
                <li *ngFor="let child of item.children">
                  <a [routerLink]="child.route" class="hdr-sub-link">{{child.label}}</a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>

        <!-- Мобильная версия навбара -->
        <div class="hdr-nav-mobile d-flex d-lg-none justify-content-between align-items-center py-2">
          <a routerLink="/" class="hdr-mobile-logo">
            <img src="assets/img/stacionar-main/new_logo.png" alt="Новая медицина" style="max-height:38px;">
          </a>
          <div class="d-flex align-items-center gap-2">
            <a href="tel:+79300332222" style="color:#1a3a5c;font-weight:700;font-size:0.95rem;">
              <i class="fas fa-phone-alt me-1"></i><span class="hdr-mob-phone-txt">+7 (930) 033-22-22</span>
            </a>
            <button class="vs-menu-toggle" style="background:none;border:none;font-size:1.4rem;color:#1a3a5c;" (click)="close_menu()">
              <i class="fas fa-bars"></i>
            </button>
          </div>
        </div>

      </div>
    </div>
  </div>

</header>