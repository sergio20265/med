<app-breadcumb [title]="'Персонал'"></app-breadcumb>

<section class="st-page">
  <div class="container">

    <!-- Вводный блок -->
    <div class="st-intro">
      <h1 class="st-intro-title">Наша команда</h1>
      <p class="st-intro-sub">
        Более 30 специалистов обеспечивают круглосуточный медицинский уход и реабилитацию.
        Каждый сотрудник проходит обучение и работает по стандартам медицинской безопасности.
      </p>
    </div>

    <!-- Категории персонала -->
    <ng-container *ngFor="let group of staffGroups">

      <!-- Заголовок категории -->
      <div class="st-group-head">
        <i [class]="group.icon + ' st-group-icon'"></i>
        <h2 class="st-group-title">{{ group.category }}</h2>
        <span class="st-group-count">{{ group.members.length }}</span>
      </div>

      <!-- ── Полные карточки (врачи, реабилитация, медсёстры, руководство) ── -->
      <div class="row g-3 mb-4" *ngIf="!group.compact">

        <!-- Руководство: 2 крупных карточки на весь ряд -->
        <ng-container *ngIf="group.category === 'Руководство'">
          <div class="col-sm-6 col-lg-4"
               *ngFor="let m of group.members">
            <div class="st-card st-card--leader">
              <div class="st-card-photo st-card-photo--lg">
                <img *ngIf="m.photo" [src]="m.photo" [alt]="m.name" loading="lazy">
                <div *ngIf="!m.photo" class="st-card-initials">{{ initials(m.name) }}</div>
              </div>
              <div class="st-card-body">
                <h3 class="st-card-name">{{ m.name }}</h3>
                <p class="st-card-role" [innerHTML]="m.role"></p>
              </div>
            </div>
          </div>
        </ng-container>

        <!-- Врачи -->
        <ng-container *ngIf="group.category === 'Врачи'">
          <div class="col-sm-6 col-md-4 col-lg-3"
               *ngFor="let m of group.members">
            <div class="st-card">
              <div class="st-card-photo">
                <img *ngIf="m.photo" [src]="m.photo" [alt]="m.name" loading="lazy">
                <div *ngIf="!m.photo" class="st-card-initials">{{ initials(m.name) }}</div>
              </div>
              <div class="st-card-body">
                <h3 class="st-card-name">{{ m.name }}</h3>
                <p class="st-card-role" [innerHTML]="m.role"></p>
              </div>
            </div>
          </div>
        </ng-container>

        <!-- Реабилитация -->
        <ng-container *ngIf="group.category === 'Реабилитация'">
          <div class="col-sm-6 col-md-4 col-lg-3"
               *ngFor="let m of group.members">
            <div class="st-card st-card--rehab">
              <div class="st-card-photo">
                <img *ngIf="m.photo" [src]="m.photo" [alt]="m.name" loading="lazy">
                <div *ngIf="!m.photo" class="st-card-initials">{{ initials(m.name) }}</div>
              </div>
              <div class="st-card-body">
                <h3 class="st-card-name">{{ m.name }}</h3>
                <p class="st-card-role" [innerHTML]="m.role"></p>
              </div>
            </div>
          </div>
        </ng-container>

        <!-- Медсёстры -->
        <ng-container *ngIf="group.category === 'Медсёстры'">
          <div class="col-6 col-sm-4 col-md-3 col-lg-2"
               *ngFor="let m of group.members">
            <div class="st-card st-card--nurse">
              <div class="st-card-photo st-card-photo--sm">
                <img *ngIf="m.photo" [src]="m.photo" [alt]="m.name" loading="lazy">
                <div *ngIf="!m.photo" class="st-card-initials">{{ initials(m.name) }}</div>
              </div>
              <div class="st-card-body">
                <h3 class="st-card-name st-card-name--sm">{{ m.name }}</h3>
                <p class="st-card-role st-card-role--sm" [innerHTML]="m.role"></p>
              </div>
            </div>
          </div>
        </ng-container>

      </div>

      <!-- ── Компактный список (санитарки, буфет, прачечные, администраторы) ── -->
      <div class="st-compact-grid mb-4" *ngIf="group.compact">
        <div class="st-compact-item" *ngFor="let m of group.members">
          <div class="st-compact-avatar">
            <img *ngIf="m.photo" [src]="m.photo" [alt]="m.name" loading="lazy">
            <span *ngIf="!m.photo">{{ initials(m.name) }}</span>
          </div>
          <span class="st-compact-name">{{ m.name }}</span>
        </div>
      </div>

    </ng-container>

  </div>
</section>
